# Latency Test Configuration
# Optimized for minimal latency in performance testing

include "reference.conf"

network {
  name = "latency-test-loop"
  # Pin to a specific CPU core for consistent performance
  cpu-affinity = 3
  # Larger buffers to reduce syscalls
  read-buffer-size = 262144
  write-buffer-size = 262144
  # Minimal select timeout
  select-timeout-ms = 1
  # Enable busy spin mode for lowest latency (uses 100% CPU)
  busy-spin-mode = true
}

persistence {
  # Disable persistence for latency testing
  enabled = false
  store-type = "none"
}

fix-engine {

  sessions = [
    {
      session-name = "LATENCY_TEST"
      role = "initiator"
      sender-comp-id = "LATENCY_CLIENT"
      target-comp-id = "LATENCY_SERVER"
      begin-string = "FIX.4.4"
      host = "localhost"
      port = 9876

      heartbeat-interval = 30
      reset-on-logon = true
      reset-on-logout = false
      reset-on-disconnect = false

      reconnect-interval = 1
      max-reconnect-attempts = 5
      time-zone = "UTC"

      # Disable message logging for latency testing
      log-messages = false

      # Maximum performance settings
      use-pooled-messages = true
      message-pool-size = 1024
      max-message-length = 256
      max-tag-number = 100

      start-time = ""
      end-time = ""
      eod-time = ""
      reset-on-eod = false
    }
  ]
}
